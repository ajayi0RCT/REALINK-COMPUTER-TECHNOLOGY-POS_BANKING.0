<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>RCT POS System</title>
  <style>
    body { font-family: Arial, sans-serif; background:#f5f5f5; margin:0; }
    header { background:#0044cc; color:#fff; padding:1rem; text-align:center; }
    nav { background:#002a80; color:#fff; padding:0.5rem; display:flex; justify-content:space-around; }
    nav button { background:transparent; border:none; color:#fff; font-size:1rem; cursor:pointer; }
    .container { padding:1rem; }
    .card { background:#fff; padding:1rem; margin:1rem 0; border-radius:8px; box-shadow:0 2px 6px rgba(0,0,0,0.1); }
    table { width:100%; border-collapse:collapse; }
    table, th, td { border:1px solid #ddd; }
    th, td { padding:0.5rem; text-align:left; }
    #calculator { display:none; position:fixed; bottom:20px; right:20px; background:#fff; border:1px solid #ccc; padding:1rem; border-radius:8px; }
    #calculator input { width:100%; margin-bottom:0.5rem; padding:0.5rem; }
    .hidden { display:none; }
  </style>
</head>
<body>
  <header>
    <h1>RCT POS System</h1>
    <p>Smart Sales Tracker with Categories, Receipts & Invoices</p>
  </header>

  <nav>
    <button onclick="showPage('dashboard')">Dashboard</button>
    <button onclick="showPage('cashier')">Cashier</button>
    <button onclick="showPage('categories')">Categories</button>
    <button onclick="showPage('receipts')">Receipts</button>
    <button onclick="showPage('invoices')">Invoices</button>
    <button onclick="showPage('analytics')">Analytics</button>
  </nav>

  <div id="dashboard" class="container">
    <div class="card"><h2>Welcome</h2><p>Overview of sales & pending payments.</p></div>
    <div class="card"><strong>Total Sales:</strong> ₦<span id="totalSales">0</span></div>
    <div class="card"><strong>Pending Payments:</strong> ₦<span id="pendingTotal">0</span></div>
  </div>

  <div id="cashier" class="container hidden">
    <div class="card">
      <h2>Cashier - Register Sale</h2>
      <input id="productName" placeholder="Product Name">
      <input id="productPrice" type="number" placeholder="Price">
      <input id="productQty" type="number" placeholder="Quantity">
      <select id="paymentType">
        <option value="cash">Cash</option>
        <option value="transfer">Transfer</option>
        <option value="pending">Pending</option>
      </select>
      <button onclick="addSale()">Add Sale</button>
    </div>
    <div class="card">
      <h2>Sales Table</h2>
      <table id="salesTable"><thead><tr><th>Product</th><th>Price</th><th>Qty</th><th>Total</th><th>Payment</th></tr></thead><tbody></tbody></table>
    </div>
  </div>

  <div id="categories" class="container hidden">
    <div class="card">
      <h2>Manage Categories</h2>
      <input id="catName" placeholder="Category Name">
      <button onclick="addCategory()">Add Category</button>
      <ul id="categoryList"></ul>
    </div>
  </div>

  <div id="receipts" class="container hidden">
    <div class="card">
      <h2>Receipts</h2>
      <ul id="receiptList"></ul>
    </div>
  </div>

  <div id="invoices" class="container hidden">
    <div class="card">
      <h2>Invoices (Pending)</h2>
      <ul id="invoiceList"></ul>
    </div>
  </div>

  <div id="analytics" class="container hidden">
    <div class="card"><h2>Analytics (Charts Here)</h2><canvas id="salesChart"></canvas></div>
  </div>

  <!-- Invisible Calculator -->
  <div id="calculator">
    <input id="calcInput" readonly>
    <div>
      <button onclick="calcPress('1')">1</button>
      <button onclick="calcPress('2')">2</button>
      <button onclick="calcPress('3')">3</button>
      <button onclick="calcPress('+')">+</button><br>
      <button onclick="calcPress('4')">4</button>
      <button onclick="calcPress('5')">5</button>
      <button onclick="calcPress('6')">6</button>
      <button onclick="calcPress('-')">-</button><br>
      <button onclick="calcPress('7')">7</button>
      <button onclick="calcPress('8')">8</button>
      <button onclick="calcPress('9')">9</button>
      <button onclick="calcPress('*')">*</button><br>
      <button onclick="calcPress('0')">0</button>
      <button onclick="calcPress('.')">.</button>
      <button onclick="calcEval()">=</button>
      <button onclick="calcPress('/')">/</button>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script>
    let sales = JSON.parse(localStorage.getItem("sales")||"[]");
    let categories = JSON.parse(localStorage.getItem("categories")||"[]");

    function showPage(page){
      document.querySelectorAll(".container").forEach(c=>c.classList.add("hidden"));
      document.getElementById(page).classList.remove("hidden");
      if(page=="cashier") renderSales();
      if(page=="categories") renderCategories();
      if(page=="receipts") renderReceipts();
      if(page=="invoices") renderInvoices();
      if(page=="dashboard") renderDashboard();
    }

    function addSale(){
      let name=document.getElementById("productName").value;
      let price=+document.getElementById("productPrice").value;
      let qty=+document.getElementById("productQty").value;
      let type=document.getElementById("paymentType").value;
      if(!name||!price||!qty) return alert("Fill all fields");
      let total=price*qty;
      let sale={name,price,qty,total,type,date:new Date().toLocaleString()};
      sales.push(sale);
      localStorage.setItem("sales",JSON.stringify(sales));
      renderSales(); renderDashboard();
      if(type=="pending") saveInvoice(sale); else saveReceipt(sale);
    }

    function renderSales(){
      let tbody=document.querySelector("#salesTable tbody"); tbody.innerHTML="";
      sales.forEach(s=>{
        tbody.innerHTML+=`<tr><td>${s.name}</td><td>${s.price}</td><td>${s.qty}</td><td>${s.total}</td><td>${s.type}</td></tr>`;
      });
    }

    function addCategory(){
      let c=document.getElementById("catName").value;
      if(!c) return;
      categories.push(c); localStorage.setItem("categories",JSON.stringify(categories));
      renderCategories();
    }

    function renderCategories(){
      let ul=document.getElementById("categoryList"); ul.innerHTML="";
      categories.forEach(c=> ul.innerHTML+=`<li>${c}</li>`);
    }

    function saveReceipt(sale){
      let receipts=JSON.parse(localStorage.getItem("receipts")||"[]");
      receipts.push(sale); localStorage.setItem("receipts",JSON.stringify(receipts));
    }
    function renderReceipts(){
      let list=document.getElementById("receiptList"); list.innerHTML="";
      let receipts=JSON.parse(localStorage.getItem("receipts")||"[]");
      receipts.forEach(r=> list.innerHTML+=`<li>Receipt: ${r.name} ₦${r.total} (${r.date})</li>`);
    }

    function saveInvoice(sale){
      let invoices=JSON.parse(localStorage.getItem("invoices")||"[]");
      invoices.push(sale); localStorage.setItem("invoices",JSON.stringify(invoices));
    }
    function renderInvoices(){
      let list=document.getElementById("invoiceList"); list.innerHTML="";
      let invoices=JSON.parse(localStorage.getItem("invoices")||"[]");
      invoices.forEach(i=> list.innerHTML+=`<li>Invoice: ${i.name} ₦${i.total} (${i.date})</li>`);
    }

    function renderDashboard(){
      let total=sales.reduce((a,b)=>a+b.total,0);
      let pending=sales.filter(s=>s.type=="pending").reduce((a,b)=>a+b.total,0);
      document.getElementById("totalSales").innerText=total;
      document.getElementById("pendingTotal").innerText=pending;
    }

    // Calculator
    let calc=document.getElementById("calcInput");
    function calcPress(val){calc.value+=val;}
    function calcEval(){calc.value=eval(calc.value);}
    document.addEventListener("keydown",e=>{
      if(e.ctrlKey && e.key=="m"){
        let c=document.getElementById("calculator");
        c.style.display=(c.style.display=="none")?"block":"none";
      }
    });

    // Chart
    let ctx=document.getElementById("salesChart");
    new Chart(ctx,{type:"bar",data:{labels:["Sales","Pending"],datasets:[{label:"₦ Amount",data:[0,0]}]}});
  </script>
</body>
</html>
